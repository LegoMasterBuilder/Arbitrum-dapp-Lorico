{
  "version": 3,
  "sources": ["../../.pnpm/htmlnano@2.1.1_postcss@8.4.38_terser@5.31.1_typescript@5.4.5/node_modules/htmlnano/lib/modules/removeComments.mjs"],
  "sourcesContent": ["import { isComment, isConditionalComment } from '../helpers.mjs';\n\nconst MATCH_EXCERPT_REGEXP = /<!-- ?more ?-->/i;\n\n/** Removes HTML comments */\nexport function onNode(options, removeType) {\n    if (removeType !== 'all' && removeType !== 'safe' && !isMatcher(removeType)) {\n        removeType = 'safe';\n    }\n    return (node) => {\n        if (isCommentToRemove(node, removeType)) {\n            return '';\n        }\n        return node;\n    };\n}\n\nexport function onContent(options, removeType) {\n    if (removeType !== 'all' && removeType !== 'safe' && !isMatcher(removeType)) {\n        removeType = 'safe';\n    }\n    return (contents) => {\n        return contents.filter(content => ! isCommentToRemove(content, removeType));\n    };\n}\n\nfunction isCommentToRemove(text, removeType) {\n    if (typeof text !== 'string') {\n        return false;\n    }\n\n    if (! isComment(text)) {\n        // Not HTML comment\n        return false;\n    }\n\n    if (removeType === 'safe') {\n        const isNoindex = text === '<!--noindex-->' || text === '<!--/noindex-->';\n        // Don't remove noindex comments.\n        // See: https://yandex.com/support/webmaster/controlling-robot/html.xml\n        if (isNoindex) {\n            return false;\n        }\n\n        const isServerSideExclude = text === '<!--sse-->' || text === '<!--/sse-->';\n        // Don't remove sse comments.\n        // See: https://support.cloudflare.com/hc/en-us/articles/200170036-What-does-Server-Side-Excludes-SSE-do-\n        if (isServerSideExclude) {\n            return false;\n        }\n\n        // https://en.wikipedia.org/wiki/Conditional_comment\n        if (isConditionalComment(text)) {\n            return false;\n        }\n\n        // Hexo: https://hexo.io/docs/tag-plugins#Post-Excerpt\n        // Hugo: https://gohugo.io/content-management/summaries/#manual-summary-splitting\n        // WordPress: https://wordpress.com/support/wordpress-editor/blocks/more-block/2/\n        // Jekyll: https://jekyllrb.com/docs/posts/#post-excerpts\n        const isCMSExcerptComment = MATCH_EXCERPT_REGEXP.test(text);\n        if (isCMSExcerptComment) {\n            return false;\n        }\n    }\n\n    if (isMatcher(removeType)) {\n        return isMatch(text, removeType);\n    }\n\n    return true;\n}\n\nfunction isMatch(input, matcher) {\n    if (matcher instanceof RegExp) {\n        return matcher.test(input);\n    }\n\n    if (typeof matcher === 'function') {\n        return Boolean(matcher(input));\n    }\n\n    return false;\n}\n\nfunction isMatcher(matcher) {\n    if (matcher instanceof RegExp || typeof matcher === 'function') {\n        return true;\n    }\n\n    return false;\n}\n"],
  "mappings": ";;;;;;;AAEA,IAAM,uBAAuB;AAGtB,SAAS,OAAO,SAAS,YAAY;AACxC,MAAI,eAAe,SAAS,eAAe,UAAU,CAAC,UAAU,UAAU,GAAG;AACzE,iBAAa;AAAA,EACjB;AACA,SAAO,CAAC,SAAS;AACb,QAAI,kBAAkB,MAAM,UAAU,GAAG;AACrC,aAAO;AAAA,IACX;AACA,WAAO;AAAA,EACX;AACJ;AAEO,SAAS,UAAU,SAAS,YAAY;AAC3C,MAAI,eAAe,SAAS,eAAe,UAAU,CAAC,UAAU,UAAU,GAAG;AACzE,iBAAa;AAAA,EACjB;AACA,SAAO,CAAC,aAAa;AACjB,WAAO,SAAS,OAAO,aAAW,CAAE,kBAAkB,SAAS,UAAU,CAAC;AAAA,EAC9E;AACJ;AAEA,SAAS,kBAAkB,MAAM,YAAY;AACzC,MAAI,OAAO,SAAS,UAAU;AAC1B,WAAO;AAAA,EACX;AAEA,MAAI,CAAE,UAAU,IAAI,GAAG;AAEnB,WAAO;AAAA,EACX;AAEA,MAAI,eAAe,QAAQ;AACvB,UAAM,YAAY,SAAS,oBAAoB,SAAS;AAGxD,QAAI,WAAW;AACX,aAAO;AAAA,IACX;AAEA,UAAM,sBAAsB,SAAS,gBAAgB,SAAS;AAG9D,QAAI,qBAAqB;AACrB,aAAO;AAAA,IACX;AAGA,QAAI,qBAAqB,IAAI,GAAG;AAC5B,aAAO;AAAA,IACX;AAMA,UAAM,sBAAsB,qBAAqB,KAAK,IAAI;AAC1D,QAAI,qBAAqB;AACrB,aAAO;AAAA,IACX;AAAA,EACJ;AAEA,MAAI,UAAU,UAAU,GAAG;AACvB,WAAO,QAAQ,MAAM,UAAU;AAAA,EACnC;AAEA,SAAO;AACX;AAEA,SAAS,QAAQ,OAAO,SAAS;AAC7B,MAAI,mBAAmB,QAAQ;AAC3B,WAAO,QAAQ,KAAK,KAAK;AAAA,EAC7B;AAEA,MAAI,OAAO,YAAY,YAAY;AAC/B,WAAO,QAAQ,QAAQ,KAAK,CAAC;AAAA,EACjC;AAEA,SAAO;AACX;AAEA,SAAS,UAAU,SAAS;AACxB,MAAI,mBAAmB,UAAU,OAAO,YAAY,YAAY;AAC5D,WAAO;AAAA,EACX;AAEA,SAAO;AACX;",
  "names": []
}
