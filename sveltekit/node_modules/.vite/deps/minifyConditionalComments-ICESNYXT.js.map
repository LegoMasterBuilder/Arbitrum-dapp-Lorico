{
  "version": 3,
  "sources": ["../../.pnpm/htmlnano@2.1.1_postcss@8.4.38_terser@5.31.1_typescript@5.4.5/node_modules/htmlnano/lib/modules/minifyConditionalComments.mjs"],
  "sourcesContent": ["import htmlnano from '../htmlnano.mjs';\nimport { isConditionalComment } from '../helpers.mjs';\n\n// Spec: https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/compatibility/ms537512(v=vs.85)\nconst CONDITIONAL_COMMENT_REGEXP = /(<!--\\[if\\s+?[^<>[\\]]+?]>)([\\s\\S]+?)(<!\\[endif\\]-->)/gm;\n\n/** Minify content inside conditional comments */\nexport default async function minifyConditionalComments(tree, htmlnanoOptions) {\n    // forEach, tree.walk, tree.match just don't support Promise.\n    for (let i = 0, len = tree.length; i < len; i++) {\n        const node = tree[i];\n\n        if (typeof node === 'string' && isConditionalComment(node)) {\n            tree[i] = await minifycontentInsideConditionalComments(node, htmlnanoOptions);\n        }\n\n        if (node.content && node.content.length) {\n            tree[i].content = await minifyConditionalComments(node.content, htmlnanoOptions);\n        }\n    }\n\n    return tree;\n}\n\nasync function minifycontentInsideConditionalComments(text, htmlnanoOptions) {\n    let match;\n    const matches = [];\n\n    // FIXME!\n    // String#matchAll is supported since Node.js 12\n    while ((match = CONDITIONAL_COMMENT_REGEXP.exec(text)) !== null) {\n        matches.push([match[1], match[2], match[3]]);\n    }\n\n    if (!matches.length) {\n        return Promise.resolve(text);\n    }\n\n    return Promise.all(matches.map(async match => {\n        const result = await htmlnano.process(match[1], htmlnanoOptions, {}, {});\n        let minified = result.html;\n\n        if (match[1].includes('<html') && minified.includes('</html>')) {\n            minified = minified.replace('</html>', '');\n        }\n\n        return match[0] + minified + match[2];\n    }));\n}\n"],
  "mappings": ";;;;;;;;;;AAIA,IAAM,6BAA6B;AAGnC,eAAO,0BAAiD,MAAM,iBAAiB;AAE3E,WAAS,IAAI,GAAG,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAC7C,UAAM,OAAO,KAAK,CAAC;AAEnB,QAAI,OAAO,SAAS,YAAY,qBAAqB,IAAI,GAAG;AACxD,WAAK,CAAC,IAAI,MAAM,uCAAuC,MAAM,eAAe;AAAA,IAChF;AAEA,QAAI,KAAK,WAAW,KAAK,QAAQ,QAAQ;AACrC,WAAK,CAAC,EAAE,UAAU,MAAM,0BAA0B,KAAK,SAAS,eAAe;AAAA,IACnF;AAAA,EACJ;AAEA,SAAO;AACX;AAEA,eAAe,uCAAuC,MAAM,iBAAiB;AACzE,MAAI;AACJ,QAAM,UAAU,CAAC;AAIjB,UAAQ,QAAQ,2BAA2B,KAAK,IAAI,OAAO,MAAM;AAC7D,YAAQ,KAAK,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AAAA,EAC/C;AAEA,MAAI,CAAC,QAAQ,QAAQ;AACjB,WAAO,QAAQ,QAAQ,IAAI;AAAA,EAC/B;AAEA,SAAO,QAAQ,IAAI,QAAQ,IAAI,OAAMA,WAAS;AAC1C,UAAM,SAAS,MAAM,iBAAS,QAAQA,OAAM,CAAC,GAAG,iBAAiB,CAAC,GAAG,CAAC,CAAC;AACvE,QAAI,WAAW,OAAO;AAEtB,QAAIA,OAAM,CAAC,EAAE,SAAS,OAAO,KAAK,SAAS,SAAS,SAAS,GAAG;AAC5D,iBAAW,SAAS,QAAQ,WAAW,EAAE;AAAA,IAC7C;AAEA,WAAOA,OAAM,CAAC,IAAI,WAAWA,OAAM,CAAC;AAAA,EACxC,CAAC,CAAC;AACN;",
  "names": ["match"]
}
